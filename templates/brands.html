{% extends "base.html" %}

{% block title %}Brands - Brand Manager{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h1 class="card-title">
            <i class="fas fa-tags"></i> Brand Management
        </h1>
        <a href="{{ url_for('new_brand') }}" class="btn btn-primary">
            <i class="fas fa-plus"></i> New Brand
        </a>
    </div>
</div>

{% if brands %}
<div class="grid grid-2">
    {% for brand in brands %}
    <div class="card brand-card" style="border-left: 4px solid {{ brand.color }};">
        <div class="brand-header" style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
            <div style="flex: 1;">
                <h3 style="color: {{ brand.color }}; font-size: 1.5rem; font-weight: 600; margin-bottom: 0.5rem;">
                    {{ brand.name }}
                </h3>
                {% if brand.description %}
                <p style="color: #6b7280; margin-bottom: 1rem;">{{ brand.description }}</p>
                {% endif %}
            </div>
            <div class="brand-color" style="width: 2rem; height: 2rem; background-color: {{ brand.color }}; border-radius: 0.5rem; border: 2px solid #e5e7eb;"></div>
        </div>
        
        <div class="brand-stats" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
            <div class="stat-item" style="text-align: center; padding: 0.75rem; background-color: #f9fafb; border-radius: 0.5rem;">
                <div style="font-size: 1.5rem; font-weight: 600; color: {{ brand.color }};">{{ brand.tasks|length }}</div>
                <div style="font-size: 0.75rem; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em;">Tasks</div>
            </div>
            <div class="stat-item" style="text-align: center; padding: 0.75rem; background-color: #f9fafb; border-radius: 0.5rem;">
                <div style="font-size: 1.5rem; font-weight: 600; color: {{ brand.color }};">{{ brand.shoots|length }}</div>
                <div style="font-size: 0.75rem; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em;">Shoots</div>
            </div>
            <div class="stat-item" style="text-align: center; padding: 0.75rem; background-color: #f9fafb; border-radius: 0.5rem;">
                <div style="font-size: 1.5rem; font-weight: 600; color: {{ brand.color }};">{{ brand.content_items|length }}</div>
                <div style="font-size: 0.75rem; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em;">Content</div>
            </div>
        </div>
        
        <div class="brand-actions" style="display: flex; gap: 0.5rem;">
            <a href="{{ url_for('brand_detail', brand_id=brand.id) }}" class="btn btn-primary" style="flex: 1; text-align: center;">
                <i class="fas fa-eye"></i> View Details
            </a>
            <a href="{{ url_for('edit_brand', brand_id=brand.id) }}" class="btn btn-secondary">
                <i class="fas fa-edit"></i>
            </a>
            <button onclick="deleteBrand({{ brand.id }})" class="btn btn-danger">
                <i class="fas fa-trash"></i>
            </button>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="card" style="text-align: center; padding: 3rem;">
    <div style="color: #6b7280; margin-bottom: 1rem;">
        <i class="fas fa-tags" style="font-size: 3rem; opacity: 0.3;"></i>
    </div>
    <h3 style="color: #374151; margin-bottom: 0.5rem;">No brands yet</h3>
    <p style="color: #6b7280; margin-bottom: 2rem;">Create your first brand to start organizing your creative work.</p>
    <a href="{{ url_for('new_brand') }}" class="btn btn-primary">
        <i class="fas fa-plus"></i> Create First Brand
    </a>
</div>
{% endif %}

<script>
function deleteBrand(brandId) {
    if (confirm('Are you sure you want to delete this brand? This will also delete all associated tasks, shoots, and content.')) {
        fetch('/brands/' + brandId + '/delete', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                location.reload();
            } else {
                alert('Error deleting brand');
            }
        });
    }
}
</script>
{% endblock %}
